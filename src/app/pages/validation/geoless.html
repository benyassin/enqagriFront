<p-messages [(value)]="msgs"></p-messages>
<p-confirmDialog header="Confirmation" icon="fa fa-question-circle" width="425"></p-confirmDialog>

<div class="row">
    <div class="bt-group pull-right">
        <button  [disabled]="(index != 0 || user?.role != 'controleur')" (click)="saveChange()" class="btn btn-primary btn-lg m-r-5"><i class="fa fa-floppy-o pull-left"></i>Enregistrer</button>
        <button  [disabled]="(user?.role != 'controleur') || (validation[index] == 'valid') || (index == lenght - 1 && validation[index] =='valid')" (click)="action('valid')" class="btn btn-success btn-lg m-r-5"><i class="fa fa-check pull-left"></i>Valider</button>
        <button  [disabled]="(user?.role != 'controleur') || (validation[index] == 'valid') || (index == 0)" href="#modal-refus"  class="btn btn-danger btn-lg m-r-5" data-toggle="modal"><i class="fa fa-ban pull-left"></i>Rejeter</button>
    </div>
    <div class="col-md-2">
    </div>
</div>
<br>
<div class="row">
        <div class="col-md-6">
                <div class="panel panel-success">
                   <div class="panel-body ">

                                <div id="map" style="height: 300px;"></div>
                            </div>
                        </div>
                    </div>
                        <div class="col-md-6">
                        <div class="panel panel-success">
                                <div class="panel-body ">
                                <table id="data-table" class="table table-striped table-bordered text-center">
                                     
                                        <tbody>
                                            <tr>
                                                <th>ID Collecte</th>
                                                <td>{{collecte.id_collecte+'-'+collecte.numero}}</td>
                                            </tr>
                                            <!-- <tr>
                                                <td>superficie</td>
                                                <td>{{selectedParcelle?.superficie}}</td>
                                            </tr> -->
                                            <!-- <tr>
                                                <td>numero</td>
                                                <td>{{selectedParcelle?.numero}}</td>
                                            </tr> -->
                                            <!-- <tr>
                                                <td>Type</td>
                                                <td>{{selectedParcelle?.gjson?.type}}</td>
                                            </tr> -->
                                            <!-- <tr>
                                                <td>Capture</td>
                                                <td><a href="#modal-dialog" class="btn btn-sm btn-success" data-toggle="modal">Ouvrir</a></td>
                                            </tr> -->
                                            <tr>
                                                <th>Date Creation</th>
                                                <td>{{collecte?.collecte[0]?.data[0]?.date_creation}}</td>
                                            </tr>
                                            <tr>
                                                <th>Region</th>
                                                <td>{{collecte?.region}}</td>
                                            </tr>
                                            <tr>
                                                <th>Province</th>
                                                <td>{{collecte?.province}}</td>
                                            </tr>
                                            <tr>
                                                <th>Commune</th>
                                                <td>{{collecte?.commune}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                           
                   </div>
                   </div>
                </div>
                </div>
                <div class="modal fade" id="modal-dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                <h4 class="modal-title">Capture</h4>
                            </div>
                            <div class="modal-body">
                                    
                                <img src="{{collecte?.collecte[0]?.data[0]?.capture}}" /> </div>
                            <div class="modal-footer">
                                <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">Fermer</a>                            </div>
                        </div>
                    </div>
                </div>

<div class="modal fade" id="modal-refus">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                <h4 class="modal-title">Message</h4>
            </div>
            <div class="modal-body">
                <textarea class="form-control" [(ngModel)]="rmessage" name="rmessage" rows="5" placeholder="message ..."></textarea>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">Fermer</a>
                <a (click)="action('reject')" class="btn btn-sm btn-primary" data-dismiss="modal">Rejeter</a>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-success">
    <div class="panel-body ">
                <formio *ngIf="!hidden" src="{{srcformio}}" [options]="options" [submission]=dataformio (change)="onSubmit($event)"></formio>
        </div>
</div>
        <!-- <button 
        class="btn btn-primary">Détails
        </button>
        <button
        class="btn btn-warning">Parcelles
        </button>        -->
    
    <!-- {{collecte | json}} -->